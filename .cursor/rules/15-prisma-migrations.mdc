---
description: Prisma migration flow for API DB changes
globs: /Users/jpmcglone/Developer/menofhunger/menofhunger-api/prisma/**
alwaysApply: false
---

# Prisma migration flow (API)

When a feature changes the DB schema, always use this exact flow:

1) Update `prisma/schema.prisma`.
2) Create migration SQL via script (no manual SQL edits):
   - `npm run prisma:migrate:create -- <name>`
3) Apply migrations:
   - `npm run prisma:migrate:deploy`
4) Regenerate Prisma client:
   - `npx prisma generate`

Rules:
- Never skip `migrate:create` or `migrate:deploy` when schema changes.
- Avoid editing migration SQL by hand unless explicitly required.
- If a migration fails locally, resolve it with `prisma migrate resolve` before re-deploying.
